{"mappings":"gkBAMA,MAAMA,EAAaC,SAASC,cAAc,gBACpCC,EAAUF,SAASC,cAAc,YACjCE,EAAUH,SAASC,cAAc,cAEvCF,EAAWK,iBAAiB,UAO5BC,eAA4BC,GAK1B,GAJAA,EAAEC,iBACFC,EAAcF,EAAEG,OAAOC,SAASC,YAAYC,MAAMC,OAClDC,EAAO,EAiJT,WACEZ,EAAQa,UAAY,E,CAjJpBC,GACoB,KAAhBR,EAMF,OALAT,EAAWkB,QACXd,EAAQe,UAAUC,IAAI,kBACtBC,EAAAC,GAASC,OAAOC,QAAQ,0BAA2B,CACjDC,cAAc,IAIlB,IACE,MACEC,KAAMC,EACNC,UAAWC,EACXC,MAAOC,SACC,EAAAC,EAAAC,eAAcxB,EAAaM,GACrC,GAAiB,IAAbgB,EAOF,YANAV,EAAAC,GAASC,OAAOW,QACd,2EACA,CACET,cAAc,IAgBpB,GAXAJ,EAAAC,GAASC,OAAOY,QAAQ,oBAAoBN,YAAyB,CACnEJ,cAAc,IAEhBW,EAAYT,GACZU,EAAiB,IAAIhB,EAAAiB,GAAJ,CAAmB,aAAc,CAEhDC,QAAS,CAAC,UAAW,WAErBC,UAAW,UACXC,aAAa,IAEXZ,EAAuB,GAAPd,EAOlB,OANAX,EAAQe,UAAUC,IAAI,aACtBC,EAAAC,GAASC,OAAOC,QACd,6DACA,CAAEC,cAAc,SAElBiB,IAGFtC,EAAQe,UAAUwB,OAAO,Y,CACzB,MACAtB,EAAAC,GAASC,OAAOW,QAAQ,0B,CAM1BU,QAAQC,IAAIpC,E,IA9DdL,EAAQC,iBAAiB,SAiEzBC,iBACES,GAAQ,EACR,IACE,MACEW,KAAMC,EACNC,UAAWC,EACXC,MAAOC,SACC,EAAAC,EAAAC,eAAcxB,EAAaM,GAKrC,GAJAqB,EAAYT,GACZU,EAAeS,UAsEnB,WACE,MAAQC,OAAQC,GACd7C,EAAQ8C,kBAAkBC,wBAE5BC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,U,CA3EVC,GAEI1B,EAAuB,GAAPd,EAGlB,OAFAX,EAAQe,UAAUC,IAAI,kBACtBsB,G,CAGF,MAAOc,GACPZ,QAAQC,IAAIW,GACZnC,EAAAC,GAASC,OAAOW,QAAQ,0B,KAlF5B,IAAIG,EAAiB,KACjB5B,EAAc,KACdM,EAAO,EAsFX,SAAS2B,IACPvC,EAAQsD,mBACN,YACA,kE,CAQJ,SAASrB,EAAYsB,GACnBA,EAAKC,KACH,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,MAEA/D,EAAQsD,mBACN,YACA,sBACWI,kEAEKD,WAAsBE,4IAI5BC,6GAIAC,gHAIAC,iHAIAC,sFAMX,G","sources":["src/index.js"],"sourcesContent":["import './css/styles.css';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchPictures } from './js/fetch-pictures';\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-more');\n\nsearchForm.addEventListener('submit', handleSearch);\nloadBtn.addEventListener('click', handleLoadMore);\n\nlet simpleLightbox = null;\nlet searchQuery = null;\nlet page = 1;\n\nasync function handleSearch(e) {\n  e.preventDefault();\n  searchQuery = e.target.elements.searchQuery.value.trim();\n  page = 1;\n  ClearMarkUp();\n  if (searchQuery === '') {\n    searchForm.reset();\n    loadBtn.classList.add('is-hidden');\n    Notiflix.Notify.warning('Please, enter a request', {\n      clickToClose: true,\n    });\n    return;\n  }\n  try {\n    const {\n      hits: pictures,\n      totalHits: totalQuantity,\n      total: quantity,\n    } = await fetchPictures(searchQuery, page);\n    if (quantity === 0) {\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.',\n        {\n          clickToClose: true,\n        }\n      );\n      return;\n    }\n    Notiflix.Notify.success(`Hooray! We found ${totalQuantity} images.`, {\n      clickToClose: true,\n    });\n    createCards(pictures);\n    simpleLightbox = new SimpleLightbox('.gallery a', {\n      // navText: ['&#11178;', '&#11179;'],\n      navText: ['&#8656;', '&#8658;'],\n      //   closeText: \"&#10015;\", краще не розкоментовувати :)\n      closeText: '&#10803',\n      showCounter: false,\n    });\n    if (totalQuantity < page * 40) {\n      loadBtn.classList.add('is-hidden');\n      Notiflix.Notify.warning(\n        \"We're sorry, but you've reached the end of search results.\",\n        { clickToClose: true }\n      );\n      createEndMessage();\n      return;\n    }\n    loadBtn.classList.remove('is-hidden');\n  } catch {\n    Notiflix.Notify.failure('Please try again later.'),\n      {\n        clickToClose: true,\n      };\n  }\n\n  console.log(searchQuery);\n}\n\nasync function handleLoadMore() {\n  page += 1;\n  try {\n    const {\n      hits: pictures,\n      totalHits: totalQuantity,\n      total: quantity,\n    } = await fetchPictures(searchQuery, page);\n    createCards(pictures);\n    simpleLightbox.refresh();\n    autoScrollPage();\n\n    if (totalQuantity < page * 40) {\n      loadBtn.classList.add('is-hidden');\n      createEndMessage();\n      return;\n    }\n  } catch (err) {\n    console.log(err);\n    Notiflix.Notify.failure('Please try again later.'),\n      {\n        clickToClose: true,\n      };\n  }\n}\nfunction createEndMessage() {\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    `\n    <p class=\"end-message\">\n      The end :)\n    </p>\n    `\n  );\n}\n\nfunction createCards(data) {\n  data.map(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => {\n      gallery.insertAdjacentHTML(\n        'beforeend',\n        `\n        <a href=\"${largeImageURL}\">\n          <div class=\"photo-card\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n              <p class=\"info-item\">\n                <b>Likes</b>\n                ${likes}\n              </p>\n              <p class=\"info-item\">\n                <b>Views</b>\n                ${views}\n              </p>\n              <p class=\"info-item\">\n                <b>Comments</b>\n                ${comments}\n              </p>\n              <p class=\"info-item\">\n                <b>Downloads</b>\n                ${downloads}\n              </p>\n            </div>\n          </div>\n        </a>\n        `\n      );\n    }\n  );\n}\n\nfunction autoScrollPage() {\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction ClearMarkUp() {\n  gallery.innerHTML = '';\n}\n"],"names":["$1f0dc3b9307be026$var$searchForm","document","querySelector","$1f0dc3b9307be026$var$gallery","$1f0dc3b9307be026$var$loadBtn","addEventListener","async","e","preventDefault","$1f0dc3b9307be026$var$searchQuery","target","elements","searchQuery","value","trim","$1f0dc3b9307be026$var$page","innerHTML","$1f0dc3b9307be026$var$ClearMarkUp","reset","classList","add","$parcel$interopDefault","$7Y9D8","Notify","warning","clickToClose","hits","pictures","totalHits","totalQuantity","total","quantity","$7NwUX","fetchPictures","failure","success","$1f0dc3b9307be026$var$createCards","$1f0dc3b9307be026$var$simpleLightbox","$fZKcF","navText","closeText","showCounter","$1f0dc3b9307be026$var$createEndMessage","remove","console","log","refresh","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$1f0dc3b9307be026$var$autoScrollPage","err","insertAdjacentHTML","data","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"version":3,"file":"index.aa68b91f.js.map"}