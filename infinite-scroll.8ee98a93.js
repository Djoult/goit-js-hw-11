function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},i=n.parcelRequired7c6;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,n){o[e]=n},n.parcelRequired7c6=i);var r=i("7Y9D8"),s=i("fZKcF"),l=i("7NwUX");const a=document.querySelector("#search-form"),c=document.querySelector(".gallery"),d=document.querySelector(".load-more");a.addEventListener("submit",(async function(n){if(n.preventDefault(),f=n.target.elements.searchQuery.value.trim(),h=1,function(){c.innerHTML=""}(),""===f)return a.reset(),void e(r).Notify.warning("Please, enter a request",{clickToClose:!0});try{const{hits:n,totalHits:t,total:o}=await(0,l.fetchPictures)(f,h);if(0===o)return void e(r).Notify.failure("Sorry, there are no images matching your search query. Please try again.",{clickToClose:!0});if(e(r).Notify.success(`Hooray! We found ${t} images.`,{clickToClose:!0}),p(n),window.addEventListener("scroll",g),u=new(e(s))(".gallery a",{navText:["&#8656;","&#8658;"],closeText:"&#10803",showCounter:!1}),t<40*h)return window.removeEventListener("scroll",g),d.classList.add("is-hidden"),e(r).Notify.warning("We're sorry, but you've reached the end of search results.",{clickToClose:!0}),void y()}catch{e(r).Notify.failure("Please try again later.")}console.log(f)})),d.addEventListener("click",m);let u=null,f=null,h=1;function g(){const{scrollTop:e,scrollHeight:n,clientHeight:t}=document.documentElement;console.log({scrollTop:e,scrollHeight:n,clientHeight:t}),t+e>=n-5&&m()}async function m(){h+=1;try{const{hits:e,totalHits:n,total:t}=await(0,l.fetchPictures)(f,h);if(p(e),u.refresh(),function(){const{height:e}=c.firstElementChild.getBoundingClientRect();window.scrollBy({top:2*e,behavior:"smooth"})}(),n<40*h)return window.removeEventListener("scroll",g),d.classList.add("is-hidden"),void y()}catch(n){console.log(n),e(r).Notify.failure("Please try again later.")}}function y(){c.insertAdjacentHTML("beforeend",'\n    <p class="end-message">\n      The end :)\n    </p>\n    ')}function p(e){e.map((({webformatURL:e,largeImageURL:n,tags:t,likes:o,views:i,comments:r,downloads:s})=>{c.insertAdjacentHTML("beforeend",`\n        <a href="${n}">\n          <div class="photo-card">\n            <img src="${e}" alt="${t}" loading="lazy" />\n            <div class="info">\n              <p class="info-item">\n                <b>Likes</b>\n                ${o}\n              </p>\n              <p class="info-item">\n                <b>Views</b>\n                ${i}\n              </p>\n              <p class="info-item">\n                <b>Comments</b>\n                ${r}\n              </p>\n              <p class="info-item">\n                <b>Downloads</b>\n                ${s}\n              </p>\n            </div>\n          </div>\n        </a>\n        `)}))}
//# sourceMappingURL=infinite-scroll.8ee98a93.js.map
